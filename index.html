<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
		<style>
			.converter_form {
				display: flex;
				gap: 30px;
				align-items: center;
			}

			.converter_input {
				width: 50px;
				height: 50px;
				padding: 0px;
			}

			.converter_submit {
				width: 75px;
				height: 50px;
			}
			
			.converter_result {
				margin-top: 100px;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section class="center">
					<h1>
						Аналитическая геометрия
					</h1>
				</section>
				<section data-markdown="markdown/angeom.md"></section>
				<section class="center">
					<h2>
						Уравнения прямой на плоскости
					</h2>
				</section>
				<section>
					<section data-markdown="markdown/general.md"></section>
					<section data-markdown="markdown/general_example.md"></section>
				</section>
				<section>
					<section data-markdown="markdown/at_2_points.md"></section>
					<section data-markdown="markdown/at_2_points_example_1.md"></section>
					<section data-markdown="markdown/at_2_points_example_2.md"></section>
				</section>
				<section>
					<section data-markdown="markdown/canonical.md"></section>
					<section data-markdown="markdown/canonical_example_1.md"></section>
					<section data-markdown="markdown/canonical_example_2.md"></section>
				</section>
				<section>
					<section data-markdown="markdown/parametric.md"></section>
					<section data-markdown="markdown/parametric_example.md"></section>
				</section>
				<section class="center">
					<h2>
						Перевод одного уравнения в другое
					</h2>
				</section>
				<section>
					<section data-markdown="markdown/from_general_to_canonical_1.md"></section>
					<section data-markdown="markdown/from_general_to_canonical_2.md"></section>
				</section>
				<section>
					<section data-markdown="markdown/from_general_to_parametric_1.md"></section>
					<section data-markdown="markdown/from_general_to_parametric_2.md"></section>
				</section>
				<section>
					<section data-markdown="markdown/from_canonical_to_general.md"></section>
				</section>
				<section>
					<section data-markdown="markdown/from_canonical_to_parametric_1.md"></section>
					<section data-markdown="markdown/from_canonical_to_parametric_2.md"></section>
				</section>
				<section>
					<section data-markdown="markdown/from_parametric_to_canonical_1.md"></section>
					<section data-markdown="markdown/from_parametric_to_canonical_2.md"></section>
				</section>
				<section>
					<section data-markdown="markdown/from_parametric_to_general.md"></section>
				</section>
				<section class="center">
					<h2>
						Конвертеры
					</h2>
				</section>
				<section>
					<h3>Конвертер из общего в каноническое</h3>
					<form action="" method="post" class="converter_form">
							<input id="converter1_A" type="number" value="" class="converter_input">
							<div class="formula1"></div>
							<input id="converter1_B" type="number" value="" class="converter_input">
							<div class="formula2"></div>
							<input id="converter1_C" type="number" value="" class="converter_input">
							<div class="formula3"></div>
							<input type="submit" id="converter1_submit" class="converter_submit" value="=>">
					</form>
					<div class="converter_result" id="converter_result"></div>
				</section>
				<section class="center">
					Спасибо за внимание!
				</section>
			</div>
		</div>

    <script src="/mathlibrary/algebrite.bundle-for-browser.js"></script>
    <script src="/mathlibrary/math.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.css" integrity="sha384-yW1frltt4cd2K6QCmOMx4M+ylOmyrGb+NDouZ1f5VL2f4NN7uBu5PQsmUSgWib1W" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.js" integrity="sha384-ZfxPSr1+NHNHrv9KI48JF/1RkvdoxKWJPuYyfxE+iexlsGw8tyQR4OuNVNUuzwLN" crossorigin="anonymous"></script>
		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				center: false,
				dependencies: [
					{
						src: 'plugin/katex/katex.js',
						async: true,
					},
					{
						src: 'plugin/menu/menu.js'
					},
					{
						src: 'plugin/fullscreen/fullscreen.js'
					}
				],
				menu: {
					numbers: true,
					markers: true,
				},
				slideNumber: true,
				contols: true,
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});

			function parseTex(tex) {
				//return katex.renderToString(math.parse(tex).toTex());
				return katex.renderToString(tex);
			}

			window.onload = () => {
				//console.log(parseTex("x"));
				document.querySelector(".formula1").innerHTML = parseTex("x\\;+");
				document.querySelector(".formula2").innerHTML = parseTex("y\\;+");
				document.querySelector(".formula3").innerHTML = parseTex(" = 0");
				document.querySelector("#converter1_submit").onclick = (e) => {
					e.preventDefault();
					let A = parseFloat(document.querySelector("#converter1_A").value);
					let B = parseFloat(document.querySelector("#converter1_B").value);
					let C = parseFloat(document.querySelector("#converter1_C").value);
					//console.log(A);
					//console.log(B);
					//console.log(C);
					if(isNaN(A) || isNaN(B) || isNaN(C)) {
						console.error();
					}
					let x0 = 0, y0 = 0;
					if(A != 0) {
						x0 = +(-C/A).toFixed(2);
					}
					if(B != 0) {
						y0 = +(-C/B).toFixed(2);
					}
					//console.log(x0);
					//console.log(y0);
					let convert_equation;
					let x = Math.abs(x0);
					let y = Math.abs(y0);
					if((x0 < 0) && (y0 < 0)) {
						convert_equation = `\\dfrac{x+${x}}{${-B}} = \\dfrac{y+${y}}{${A}}`;
					}
					else if((x0 < 0) && (y0 > 0)) {
						convert_equation = `\\dfrac{x+${x}}{${-B}} = \\dfrac{y-${y}}{${A}}`;
					}
					else if((x0 > 0) && (y0 < 0)) {
						convert_equation = `\\dfrac{x-${x}}{${-B}} = \\dfrac{y+${y}}{${A}}`;
					}
					else {
						convert_equation = `\\dfrac{x-${x}}{${-B}} = \\dfrac{y-${y}}{${A}}`;
					}
					convert_equation = parseTex(convert_equation);

					document.querySelector('#converter_result').innerHTML = convert_equation;
				}
			}
		</script>
	</body>
</html>
